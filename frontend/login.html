<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Login - Kind Hearts</title>
<link rel="stylesheet" href="css/style.css">
<script defer>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('loginForm');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const payload = { email: formData.get('email'), password: formData.get('password') };
    const res = await fetch('http://localhost:5000/api/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
    const data = await res.json();
    if (!res.ok) { alert(data.message || 'Login failed'); return; }
    // Save user to localStorage for demo (not secure) and go to dashboard
    localStorage.setItem('kh_user', JSON.stringify(data.user));
    alert('Login successful');
    window.location.href = 'dashboard.html';
  });
});
</script>
</head>
<body class="register-body">
  <div class="bg-shapes">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <div class="register-card">
      <h2>Login</h2>
      <form id="loginForm">
          <input name="email" type="email" placeholder="Email" required>
          <input name="password" type="password" placeholder="Password" required>
          <button type="submit">Login</button>
      </form>
      <p>Don't have an account? <a href="register.html">Register</a></p>
  </div>
</body>
</html>
